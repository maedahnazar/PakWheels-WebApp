{% extends 'core/base.html' %}

{% block content %}
<div class="car-edit">
    <h1>Edit Car Details</h1>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ ad_form.as_p }}
        {{ car_form.as_p }}
        {{ inspection_report_form.as_p }}

        <h2>Images</h2>
        {% if existing_images %}
            <div class="existing-images">
                {% for image in existing_images %}
                    <div class="image-container" style="position: relative; display: inline-block; margin: 10px;">
                        <img src="{{ image.uploaded_image.url }}" alt="Car Image" style="width: 150px; height: 100px;">
                        <a href="{% url 'remove_car_image' image.id %}" style="position: absolute; top: 0; right: 0; background: red; color: white; text-decoration: none; padding: 2px 5px;">&times;</a>
                    </div>
                {% endfor %}
            </div>
            <!-- Display the image upload field as optional if existing images are present -->
            <div class="image-upload-optional">
                <p>You can add more images if you like:</p>
                {{ image_form.as_p }}
            </div>
        {% else %}
            <div class="image-upload-required">
                <p>Upload at least one image:</p>
                {{ image_form.as_p }}
            </div>
        {% endif %}

        <button type="submit">Save Changes</button>
    </form>
</div>
{% endblock %}
